<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auto Contact Display</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    ul { list-style: none; padding: 0; }
    li { background: #f0f0f0; margin: 5px 0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>#Saved Contacts</h1>
  <ul id="contactList"></ul>

  <script>
    const contactList = document.getElementById('contactList');

    // Load previously saved contacts
    let contacts = JSON.parse(localStorage.getItem('contacts') || '[]');
    renderContacts();

    // Auto-trigger the contact picker when the page loads
    window.addEventListener('load', async () => {
      if ('contacts' in navigator && 'ContactsManager' in window) {
        try {
          const props = ['name', 'email', 'tel'];
          const opts = { multiple: true };
          const selectedContacts = await navigator.contacts.select(props, opts);

          if (selectedContacts.length > 0) {
            contacts.push(...selectedContacts);
            localStorage.setItem('contacts', JSON.stringify(contacts));
            renderContacts();
          }
        } catch (err) {
          console.error('Contact sharing cancelled or not supported', err);
        }
      } else {
        console.warn('Contacts API not supported in this browser.');
      }
    });

    function renderContacts() {
      contactList.innerHTML = '';
      contacts.forEach(c => {
        const name = c.name ? c.name[0] : 'No Name';
        const email = c.email ? c.email[0] : 'No Email';
        const tel = c.tel ? c.tel[0] : 'No Phone';
        const li = document.createElement('li');
        li.textContent = `Name: ${name}, Email: ${email}, Phone: ${tel}`;
        contactList.appendChild(li);
      });
    }
  </script>
</body>
</html>
